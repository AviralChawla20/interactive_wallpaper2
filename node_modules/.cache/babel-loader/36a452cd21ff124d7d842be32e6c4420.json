{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass Timer {\n  constructor() {\n    __publicField(this, \"_previousTime\");\n    __publicField(this, \"_currentTime\");\n    __publicField(this, \"_delta\");\n    __publicField(this, \"_elapsed\");\n    __publicField(this, \"_timescale\");\n    __publicField(this, \"_useFixedDelta\");\n    __publicField(this, \"_fixedDelta\");\n    __publicField(this, \"_usePageVisibilityAPI\");\n    __publicField(this, \"_pageVisibilityHandler\");\n    this._previousTime = 0;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._elapsed = 0;\n    this._timescale = 1;\n    this._useFixedDelta = false;\n    this._fixedDelta = 16.67;\n    this._usePageVisibilityAPI = typeof document !== \"undefined\" && document.hidden !== void 0;\n  }\n  // https://github.com/mrdoob/three.js/issues/20575\n  // use Page Visibility API to avoid large time delta values\n  connect() {\n    if (this._usePageVisibilityAPI) {\n      this._pageVisibilityHandler = handleVisibilityChange.bind(this);\n      document.addEventListener(\"visibilitychange\", this._pageVisibilityHandler, false);\n    }\n    return this;\n  }\n  dispose() {\n    if (this._usePageVisibilityAPI && this._pageVisibilityHandler) {\n      document.removeEventListener(\"visibilitychange\", this._pageVisibilityHandler);\n    }\n    return this;\n  }\n  disableFixedDelta() {\n    this._useFixedDelta = false;\n    return this;\n  }\n  enableFixedDelta() {\n    this._useFixedDelta = true;\n    return this;\n  }\n  getDelta() {\n    return this._delta / 1e3;\n  }\n  getElapsedTime() {\n    return this._elapsed / 1e3;\n  }\n  getFixedDelta() {\n    return this._fixedDelta / 1e3;\n  }\n  getTimescale() {\n    return this._timescale;\n  }\n  reset() {\n    this._currentTime = this._now();\n    return this;\n  }\n  setFixedDelta(fixedDelta) {\n    this._fixedDelta = fixedDelta * 1e3;\n    return this;\n  }\n  setTimescale(timescale) {\n    this._timescale = timescale;\n    return this;\n  }\n  update() {\n    if (this._useFixedDelta === true) {\n      this._delta = this._fixedDelta;\n    } else {\n      this._previousTime = this._currentTime;\n      this._currentTime = this._now();\n      this._delta = this._currentTime - this._previousTime;\n    }\n    this._delta *= this._timescale;\n    this._elapsed += this._delta;\n    return this;\n  }\n  // For THREE.Clock backward compatibility\n  get elapsedTime() {\n    return this.getElapsedTime();\n  }\n  // private\n  _now() {\n    return (typeof performance === \"undefined\" ? Date : performance).now();\n  }\n}\nfunction handleVisibilityChange() {\n  if (document.hidden === false) this.reset();\n}\nexport { Timer };","map":{"version":3,"sources":["../../src/misc/Timer.ts"],"names":[],"mappings":"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","sourcesContent":["class Timer {\n  private _previousTime: number\n  private _currentTime: number\n  private _delta: number\n  private _elapsed: number\n  private _timescale: number\n  private _useFixedDelta: boolean\n  private _fixedDelta: number\n  private _usePageVisibilityAPI: boolean\n  private _pageVisibilityHandler: ((...args: any[]) => void) | undefined\n\n  constructor() {\n    this._previousTime = 0\n    this._currentTime = 0\n    this._delta = 0\n    this._elapsed = 0\n    this._timescale = 1\n    this._useFixedDelta = false\n    this._fixedDelta = 16.67 // ms, corresponds to approx. 60 FPS\n    this._usePageVisibilityAPI = typeof document !== 'undefined' && document.hidden !== undefined\n  }\n\n  // https://github.com/mrdoob/three.js/issues/20575\n  // use Page Visibility API to avoid large time delta values\n  connect(): this {\n    if (this._usePageVisibilityAPI) {\n      this._pageVisibilityHandler = handleVisibilityChange.bind(this)\n      document.addEventListener('visibilitychange', this._pageVisibilityHandler, false)\n    }\n    return this\n  }\n\n  dispose(): this {\n    if (this._usePageVisibilityAPI && this._pageVisibilityHandler) {\n      document.removeEventListener('visibilitychange', this._pageVisibilityHandler)\n    }\n    return this\n  }\n\n  disableFixedDelta(): this {\n    this._useFixedDelta = false\n    return this\n  }\n\n  enableFixedDelta(): this {\n    this._useFixedDelta = true\n    return this\n  }\n\n  getDelta(): number {\n    return this._delta / 1000\n  }\n\n  getElapsedTime(): number {\n    return this._elapsed / 1000\n  }\n\n  getFixedDelta(): number {\n    return this._fixedDelta / 1000\n  }\n\n  getTimescale(): number {\n    return this._timescale\n  }\n\n  reset(): this {\n    this._currentTime = this._now()\n    return this\n  }\n\n  setFixedDelta(fixedDelta: number): this {\n    this._fixedDelta = fixedDelta * 1000\n    return this\n  }\n\n  setTimescale(timescale: number): this {\n    this._timescale = timescale\n    return this\n  }\n\n  update(): this {\n    if (this._useFixedDelta === true) {\n      this._delta = this._fixedDelta\n    } else {\n      this._previousTime = this._currentTime\n      this._currentTime = this._now()\n      this._delta = this._currentTime - this._previousTime\n    }\n    this._delta *= this._timescale\n    this._elapsed += this._delta // _elapsed is the accumulation of all previous deltas\n    return this\n  }\n\n  // For THREE.Clock backward compatibility\n  get elapsedTime(): number {\n    return this.getElapsedTime()\n  }\n\n  // private\n\n  private _now(): number {\n    return (typeof performance === 'undefined' ? Date : performance).now()\n  }\n}\n\nfunction handleVisibilityChange(this: Timer): void {\n  if (document.hidden === false) this.reset()\n}\n\nexport { Timer }\n"]},"metadata":{},"sourceType":"module"}